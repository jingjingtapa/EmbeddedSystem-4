#define trigPin_1 12 // 초음파 출력
#define echoPin_1 13 // 초음파 입력
#define trigPin_2 11 // 초음파 출력
#define echoPin_2 10 // 초음파 입력

#define offsetForZero 13 
#define delayTime 200

volatile unsigned long pulseDuration_1;
volatile unsigned long pulseDuration_2;

volatile float distance_1;
volatile float distance_2;

void setup() {
  pinMode(trigPin_1, OUTPUT);
  pinMode(echoPin_1, INPUT);
  pinMode(trigPin_2, OUTPUT);
  pinMode(echoPin_2, INPUT);

  Serial.begin(115200);
}

float measure_distance(int echoPin, int trigPin) {
  digitalWrite(trigPin, LOW);
  delayMicroseconds(2);
  digitalWrite(trigPin, HIGH);
  delayMicroseconds(10);
  digitalWrite(trigPin, LOW);

  unsigned long duration = pulseIn(echoPin, HIGH);
  float distance = (float)(duration * 0.0343) / 2.0; // 속도는 공기에서 약 343m/s
  return distance;
}

void loop() {
  distance_1 = measure_distance(echoPin_1, trigPin_1);
  distance_2 = measure_distance(echoPin_2, trigPin_2);

  Serial.print("distance1: ");
  Serial.print(distance_1);
  Serial.print(" distance2: ");
  Serial.println(distance_2);

  delay(delayTime); // 측정 사이에 딜레이를 추가하여 겹치지 않도록 합니다.
}

